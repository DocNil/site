<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Índice de Vulnerabilidade Clínico-Funcional-20 (IVCF-20)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #003366;
            margin: 0;
            padding: 15px;
            font-size: 14px;
            line-height: 1.5;
        }
        h1 {
            text-align: center;
            color: #003366;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        form {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 900px;
            margin: 0 auto;
        }
        .form-container {
            display: flex;
            gap: 10px;
            width: 100%;
        }
        .left-column, .right-column {
            width: calc(50% - 5px);
        }
        fieldset {
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        legend {
            font-weight: bold;
            color: #003366;
            font-size: 1em;
        }
        label {
            display: block;
            margin: 5px 0;
            font-size: 0.95em;
        }
        input[type="text"], input[type="date"] {
            padding: 4px;
            margin-bottom: 4px;
            border-radius: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            font-size: 0.95em;
        }
        input[type="text"] {
            width: 100%;
        }
        input[type="date"] {
            width: 120px; /* Tamanho reduzido para datas */
        }
        input[type="radio"] {
            margin-right: 5px;
        }
        button {
            background-color: #003366;
            color: #fff;
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }
        button:hover {
            background-color: #005599;
        }
        .button-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }
        #resultado {
            margin-top: 15px;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
            text-align: center;
            font-size: 1em;
        }
        .destaque {
            font-weight: bold;
            font-size: 1.2em;
            color: #003366;
        }
        .personal-data .field-row {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }
        .personal-data .field-group {
            display: flex;
            flex-direction: column;
        }
        .personal-data .field-group.nome {
            flex: 2; /* Nome ocupa mais espaço */
        }
        .personal-data .field-group.data {
            flex: 1; /* Datas ocupam menos espaço */
        }
        .personal-data .field-group.button {
            flex: 1; /* Botão ocupa espaço proporcional */
            display: flex;
            align-items: flex-end;
        }
        /* Estilos para impressão */
        @media print {
            button {
                display: none;
            }
            body {
                font-size: 12px;
                padding: 5px;
            }
            h1 {
                font-size: 1.3em;
                margin-bottom: 5px;
            }
            form {
                padding: 5px;
            }
            .form-container {
                display: flex; /* Mantém duas colunas */
                gap: 5px;
            }
            .left-column, .right-column {
                width: calc(50% - 2.5px); /* Mantém proporção na impressão */
            }
            fieldset {
                padding: 8px;
                margin-bottom: 5px;
            }
            label {
                margin: 2px 0;
            }
            #resultado {
                padding: 8px;
                margin-top: 5px;
            }
            .personal-data .field-row {
                gap: 5px;
            }
            .button-container {
                display: none; /* Esconde os botões na impressão */
            }
        }
    </style>
</head>
<body>
    <h1>ÍNDICE DE VULNERABILIDADE CLÍNICO-FUNCIONAL-20 (IVCF-20)</h1>
    <form id="ivcfForm">
        <fieldset class="personal-data">
            <legend>DADOS PESSOAIS</legend>
            <div class="field-row">
                <div class="field-group nome">
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" name="nome">
                </div>
                <div class="field-group data">
                    <label for="data_nascimento">Data de Nascimento:</label>
                    <input type="date" id="data_nascimento" name="data_nascimento" onchange="calcularIdade()">
                </div>
                <div class="field-group data">
                    <label for="data_atual">Data Atual:</label>
                    <input type="date" id="data_atual" name="data_atual" readonly>
                </div>
                <div class="field-group button">
                    <button type="button" onclick="window.open('idoso.pdf', '_blank')">Mais Informações</button>
                </div>
            </div>
        </fieldset>

        <p style="text-align: center; margin-bottom: 15px;">Responda às perguntas abaixo com a ajuda de familiares ou acompanhantes. Marque a opção mais apropriada para sua condição de saúde atual. Todas as respostas devem ser confirmadas por alguém que conviva com você. Nos idosos incapazes de responder, utilize as respostas do cuidador.</p>

        <div class="form-container">
            <!-- Primeira Coluna (Questões 1 a 10) -->
            <div class="left-column">
                <fieldset>
                    <legend>IDADE</legend>
                    <label>1. Qual é a sua idade?</label>
                    <label><input type="radio" name="idade" value="0" id="idade_0"> 60 a 74 anos (0 pontos)</label>
                    <label><input type="radio" name="idade" value="1" id="idade_1"> 75 a 84 anos (1 ponto)</label>
                    <label><input type="radio" name="idade" value="3" id="idade_3"> ≥ 85 anos (3 pontos)</label>
                </fieldset>

                <fieldset>
                    <legend>AUTO-PERCEPÇÃO DA SAÚDE</legend>
                    <label>2. Em geral, comparando com outras pessoas de sua idade, você diria que sua saúde é:</label>
                    <label><input type="radio" name="auto_percepcao" value="0"> Excelente, muito boa ou boa (0 pontos)</label>
                    <label><input type="radio" name="auto_percepcao" value="1"> Regular ou ruim (1 ponto)</label>
                </fieldset>

                <fieldset>
                    <legend>ATIVIDADES DE VIDA DIÁRIA (AVD) - INSTRUMENTAL (Máximo 4 pontos)</legend>
                    <label>3. Por causa de sua saúde ou condição física, você deixou de fazer compras?</label>
                    <label><input type="radio" name="compras" value="4"> Sim (4 pontos)</label>
                    <label><input type="radio" name="compras" value="0"> Não ou não faz compras por outros motivos que não a saúde (0 pontos)</label>

                    <label>4. Por causa de sua saúde ou condição física, você deixou de controlar seu dinheiro, gastos ou pagar as contas de sua casa?</label>
                    <label><input type="radio" name="dinheiro" value="4"> Sim (4 pontos)</label>
                    <label><input type="radio" name="dinheiro" value="0"> Não ou não controla o dinheiro por outros motivos que não a saúde (0 pontos)</label>

                    <label>5. Por causa de sua saúde ou condição física, você deixou de realizar pequenos trabalhos domésticos, como lavar louça, arrumar a casa ou fazer limpeza leve?</label>
                    <label><input type="radio" name="domesticos" value="4"> Sim (4 pontos)</label>
                    <label><input type="radio" name="domesticos" value="0"> Não ou não faz mais pequenos trabalhos domésticos por outros motivos que não a saúde (0 pontos)</label>
                </fieldset>

                <fieldset>
                    <legend>ATIVIDADES DE VIDA DIÁRIA (AVD) - BÁSICA</legend>
                    <label>6. Por causa de sua saúde ou condição física, você deixou de tomar banho sozinho?</label>
                    <label><input type="radio" name="banho" value="6"> Sim (6 pontos)</label>
                    <label><input type="radio" name="banho" value="0"> Não (0 pontos)</label>
                </fieldset>

                <fieldset>
                    <legend>COGNIÇÃO</legend>
                    <label>7. Algum familiar ou amigo falou que você está ficando esquecido?</label>
                    <label><input type="radio" name="esquecido" value="1"> Sim (1 ponto)</label>
                    <label><input type="radio" name="esquecido" value="0"> Não (0 pontos)</label>

                    <label>8. Este esquecimento está piorando nos últimos meses?</label>
                    <label><input type="radio" name="piora_esquecimento" value="1"> Sim (1 ponto)</label>
                    <label><input type="radio" name="piora_esquecimento" value="0"> Não (0 pontos)</label>

                    <label>9. Este esquecimento está impedindo a realização de alguma atividade do cotidiano?</label>
                    <label><input type="radio" name="impede_esquecimento" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="impede_esquecimento" value="0"> Não (0 pontos)</label>
                </fieldset>

                <fieldset>
                    <legend>HUMOR</legend>
                    <label>10. No último mês, você ficou com desânimo, tristeza ou desesperança?</label>
                    <label><input type="radio" name="desanimo" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="desanimo" value="0"> Não (0 pontos)</label>
                </fieldset>
            </div>

            <!-- Segunda Coluna (Questões 11 a 20) -->
            <div class="right-column">
                <fieldset>
                    <legend>HUMOR (continuação)</legend>
                    <label>11. No último mês, você perdeu o interesse em atividades anteriormente prazerosas?</label>
                    <label><input type="radio" name="interesse" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="interesse" value="0"> Não (0 pontos)</label>
                </fieldset>

                <fieldset>
                    <legend>MOBILIDADE</legend>
                    <label>12. Você é incapaz de elevar os braços acima do nível do ombro?</label>
                    <label><input type="radio" name="bracos" value="1"> Sim (1 ponto)</label>
                    <label><input type="radio" name="bracos" value="0"> Não (0 pontos)</label>

                    <label>13. Você é incapaz de manusear ou segurar pequenos objetos?</label>
                    <label><input type="radio" name="objetos" value="1"> Sim (1 ponto)</label>
                    <label><input type="radio" name="objetos" value="0"> Não (0 pontos)</label>

                    <label>14. Você tem alguma das quatro condições abaixo relacionadas?</label>
                    <label>- Perda de peso não intencional de 4,5 kg ou 5% do peso corporal no último ano ou 6 kg nos últimos 6 meses ou 3 kg no último mês;</label>
                    <label>- Índice de Massa Corporal (IMC) menor que 22 kg/m²;</label>
                    <label>- Circunferência da panturrilha < 31 cm;</label>
                    <label>- Tempo gasto no teste de velocidade da marcha (4m) > 5 segundos.</label>
                    <label><input type="radio" name="condicoes_fisicas" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="condicoes_fisicas" value="0"> Não (0 pontos)</label>

                    <label>15. Você tem dificuldade para caminhar capaz de impedir a realização de alguma atividade do cotidiano?</label>
                    <label><input type="radio" name="caminhar" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="caminhar" value="0"> Não (0 pontos)</label>

                    <label>16. Você teve duas ou mais quedas no último ano?</label>
                    <label><input type="radio" name="quedas" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="quedas" value="0"> Não (0 pontos)</label>
                </fieldset>

                <fieldset>
                    <legend>CONTINÊNCIA</legend>
                    <label>17. Você perde urina ou fezes, sem querer, em algum momento?</label>
                    <label><input type="radio" name="incontinencia" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="incontinencia" value="0"> Não (0 pontos)</label>
                </fieldset>

                <fieldset>
                    <legend>COMUNICAÇÃO</legend>
                    <label>18. Você tem problemas de visão capazes de impedir a realização de alguma atividade do cotidiano? (Permitido o uso de óculos ou lentes de contato)</label>
                    <label><input type="radio" name="visao" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="visao" value="0"> Não (0 pontos)</label>

                    <label>19. Você tem problemas de audição capazes de impedir a realização de alguma atividade do cotidiano? (Permitido o uso de aparelhos auditivos)</label>
                    <label><input type="radio" name="audicao" value="2"> Sim (2 pontos)</label>
                    <label><input type="radio" name="audicao" value="0"> Não (0 pontos)</label>
                </fieldset>

                <fieldset>
                    <legend>COMORBIDADES MÚLTIPLAS (Máximo 4 pontos)</legend>
                    <label>20. Você tem alguma das três condições abaixo relacionadas?</label>
                    <label>- Cinco ou mais doenças crônicas;</label>
                    <label>- Uso regular de cinco ou mais medicamentos diferentes, todo dia;</label>
                    <label>- Internação recente, nos últimos 6 meses.</label>
                    <label><input type="radio" name="comorbidades" value="4"> Sim (4 pontos)</label>
                    <label><input type="radio" name="comorbidades" value="0"> Não (0 pontos)</label>
                </fieldset>
            </div>
        </div>

        <div class="button-container">
            <button type="submit">Calcular Pontuação</button>
            <button type="button" onclick="window.print()">Imprimir</button>
        </div>
        <div id="resultado"></div>
    </form>

    <script>
        // Preencher a data atual automaticamente
        document.addEventListener('DOMContentLoaded', function() {
            const dataAtualInput = document.getElementById('data_atual');
            const hoje = new Date();
            const ano = hoje.getFullYear();
            const mes = String(hoje.getMonth() + 1).padStart(2, '0');
            const dia = String(hoje.getDate()).padStart(2, '0');
            dataAtualInput.value = `${ano}-${mes}-${dia}`;
        });

        // Calcular idade e preencher automaticamente a Questão 1
        function calcularIdade() {
            const dataNascimentoInput = document.getElementById('data_nascimento').value;
            const dataAtualInput = document.getElementById('data_atual').value;

            if (dataNascimentoInput && dataAtualInput) {
                const nascimento = new Date(dataNascimentoInput);
                const atual = new Date(dataAtualInput);
                let idade = atual.getFullYear() - nascimento.getFullYear();
                const mesDiff = atual.getMonth() - nascimento.getMonth();
                if (mesDiff < 0 || (mesDiff === 0 && atual.getDate() < nascimento.getDate())) {
                    idade--;
                }

                if (idade >= 60 && idade <= 74) {
                    document.getElementById('idade_0').checked = true;
                } else if (idade >= 75 && idade <= 84) {
                    document.getElementById('idade_1').checked = true;
                } else if (idade >= 85) {
                    document.getElementById('idade_3').checked = true;
                } else {
                    document.querySelectorAll('input[name="idade"]').forEach(radio => radio.checked = false);
                }
            }
        }

        document.getElementById('ivcfForm').addEventListener('submit', function(event) {
            event.preventDefault();

            let pontuacaoTotal = 0;

            // 1. Idade (já preenchida automaticamente)
            const idade = document.querySelector('input[name="idade"]:checked');
            if (idade) pontuacaoTotal += parseInt(idade.value);

            // 2. Auto-percepção da saúde
            const auto_percepcao = document.querySelector('input[name="auto_percepcao"]:checked');
            if (auto_percepcao) pontuacaoTotal += parseInt(auto_percepcao.value);

            // 3, 4, 5. AVD Instrumental (máximo 4 pontos)
            let avd_instrumental = 0;
            const compras = document.querySelector('input[name="compras"]:checked');
            const dinheiro = document.querySelector('input[name="dinheiro"]:checked');
            const domesticos = document.querySelector('input[name="domesticos"]:checked');
            if (compras && compras.value === "4") avd_instrumental = 4;
            else if (dinheiro && dinheiro.value === "4") avd_instrumental = 4;
            else if (domesticos && domesticos.value === "4") avd_instrumental = 4;
            pontuacaoTotal += avd_instrumental;

            // 6. AVD Básica
            const banho = document.querySelector('input[name="banho"]:checked');
            if (banho) pontuacaoTotal += parseInt(banho.value);

            // 7, 8, 9. Cognição
            const esquecido = document.querySelector('input[name="esquecido"]:checked');
            if (esquecido) pontuacaoTotal += parseInt(esquecido.value);
            const piora_esquecimento = document.querySelector('input[name="piora_esquecimento"]:checked');
            if (piora_esquecimento) pontuacaoTotal += parseInt(piora_esquecimento.value);
            const impede_esquecimento = document.querySelector('input[name="impede_esquecimento"]:checked');
            if (impede_esquecimento) pontuacaoTotal += parseInt(impede_esquecimento.value);

            // 10, 11. Humor
            const desanimo = document.querySelector('input[name="desanimo"]:checked');
            if (desanimo) pontuacaoTotal += parseInt(desanimo.value);
            const interesse = document.querySelector('input[name="interesse"]:checked');
            if (interesse) pontuacaoTotal += parseInt(interesse.value);

            // 12, 13, 14, 15, 16. Mobilidade
            const bracos = document.querySelector('input[name="bracos"]:checked');
            if (bracos) pontuacaoTotal += parseInt(bracos.value);
            const objetos = document.querySelector('input[name="objetos"]:checked');
            if (objetos) pontuacaoTotal += parseInt(objetos.value);
            const condicoes_fisicas = document.querySelector('input[name="condicoes_fisicas"]:checked');
            if (condicoes_fisicas) pontuacaoTotal += parseInt(condicoes_fisicas.value);
            const caminhar = document.querySelector('input[name="caminhar"]:checked');
            if (caminhar) pontuacaoTotal += parseInt(caminhar.value);
            const quedas = document.querySelector('input[name="quedas"]:checked');
            if (quedas) pontuacaoTotal += parseInt(quedas.value);

            // 17. Continência
            const incontinencia = document.querySelector('input[name="incontinencia"]:checked');
            if (incontinencia) pontuacaoTotal += parseInt(incontinencia.value);

            // 18, 19. Comunicação
            const visao = document.querySelector('input[name="visao"]:checked');
            if (visao) pontuacaoTotal += parseInt(visao.value);
            const audicao = document.querySelector('input[name="audicao"]:checked');
            if (audicao) pontuacaoTotal += parseInt(audicao.value);

            // 20. Comorbidades Múltiplas
            const comorbidades = document.querySelector('input[name="comorbidades"]:checked');
            if (comorbidades) pontuacaoTotal += parseInt(comorbidades.value);

            // Avaliação do estado do idoso
            let estado;
            if (pontuacaoTotal >= 0 && pontuacaoTotal <= 6) {
                estado = "IDOSO ROBUSTO";
            } else if (pontuacaoTotal >= 7 && pontuacaoTotal <= 14) {
                estado = "IDOSO PRÉ-FRÁGIL";
            } else if (pontuacaoTotal >= 15) {
                estado = "IDOSO FRÁGIL";
            } else {
                estado = "Pontuação inválida";
            }

            // Exibir resultado com nome do idoso
            const nome = document.getElementById('nome').value || "Não informado";
            document.getElementById('resultado').innerHTML = `
                <p class="destaque">Nome: ${nome}</p>
                <p class="destaque">Pontuação Total: ${pontuacaoTotal} (máximo 40 pontos)</p>
                <p class="destaque">Estado do Idoso: ${estado}</p>
                <p>Avaliação Multidimensional do Idoso</p>
            `;
        });
    </script>
</body>
</html>